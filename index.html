<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome.</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css" />
    <script type="text/javascript">
        function GetClock() {
            d = new Date();
            nhour = d.getHours();
            nmin = d.getMinutes();
            nsec = d.getSeconds();
            nmonth = d.getMonth();
            ndaynumber = d.getDate();

            if (nmin <= 9) { nmin = "0" + nmin; }
            if (nhour <= 9) { nhour = "0" + nhour; }
            if (nsec <= 9) { nsec = "0" + nsec; }

            month = new Array(12);
            weekday = new Array(7);

            month[0] = "January";
            month[1] = "February";
            month[2] = "March";
            month[3] = "April";
            month[4] = "May";
            month[5] = "June";
            month[6] = "July";
            month[7] = "August";
            month[8] = "September";
            month[9] = "October";
            month[10] = "November";
            month[11] = "December";

            weekday[0] = "Sunday";
            weekday[1] = "Monday";
            weekday[2] = "Tuesday";
            weekday[3] = "Wednesday";
            weekday[4] = "Thursday";
            weekday[5] = "Friday";
            weekday[6] = "Saturday";

            nday = weekday[d.getDay()];
            nmonth = month[d.getMonth()];

            document.getElementById('time').innerHTML = nhour + ":" + nmin + ":" + nsec;
            document.getElementById('date').innerHTML = nday + ", " + nmonth + " " + ndaynumber;

            setTimeout("GetClock()", 1000);
        }

        window.onload = loadShortcuts;
        
        function addLink() {
            document.getElementById("links").innerHTML = '<p>Add Shortcut Link</p><input type="text" id="linkName" class="linkText" placeholder="Name"/><br><input type="text" id="linkUrl" class="linkText" placeholder="Address"/><br><input class="linkText" type="button" value=" Save " onclick="saveLink()" />';
        }
        
        function saveLink() {
            var name = document.getElementById('linkName').value;
            var url = document.getElementById('linkUrl').value;
            var customLinks = 0;
            
            if (localStorage.getItem('customLinks') != null) {
                customLinks = localStorage.getItem('customLinks');
                
            }
            
            localStorage.setItem('customLinks', customLinks + 1);
            localStorage.setItem('LinkUrl' + customLinks, url);
            localStorage.setItem('LinkName' + customLinks, name);
            
            location.reload();
        }
        
        function displayBtns() {
            if (document.getElementById('links').innerHTML.includes('addLink')) {
                console.log(1);
                var end = '<img src="cog.png" height="16px" onclick="displayBtns()" />';
                document.getElementById('links').innerHTML= buildLinkString(end);
            } else {
                console.log(2);
                var end = '<img src="cog.png" height="16px" onclick="displayBtns()" />';
                var btns = ' <a onclick="addLink()" style="text-decoration:underline;cursor:pointer;">+</a> <a onclick="killLinks()" style="text-decoration:underline;cursor:pointer;">-</a> ';
                var input = btns + end;
                document.getElementById('links').innerHTML= buildLinkString(input);  
            }
            
        }
        
        function buildLinkString(input) {
            var customLinks = 0;
            
            if (localStorage.getItem('customLinks') != null) {
                customLinks = Number(localStorage.getItem('customLinks'));
            }
            
            var links = '';
            
            var i;
            for (i = 0; i < customLinks; i++) { 
                if (localStorage.getItem('LinkUrl' + i) != null) {
                    links += '<a href="' + localStorage.getItem('LinkUrl' + i) + '">';
                    links += localStorage.getItem('LinkName' + i) + '</a> ';
                }
            }
            
            links += input;
            
            return links;
        }
        
        function loadShortcuts() {
            var end = '<img src="cog.png" height="16px" onclick="displayBtns()" />';
            
            
            document.getElementById('links').innerHTML= buildLinkString(end);
            
            GetClock();
        }
        
        function killLinks() {
            localStorage.clear();
            location.reload();
        }
    </script>
</head>
<body>

<div class="background"></div>

<div id="container">
    <div id="clock">
        <p id="date"></p>
        <p id="time"></p>
        <p id="links"></p>
    </div>

    <div id="search">
        <script>
            function onBlur(el) { if (el.value == '') { el.value = el.defaultValue; } }
            function onFocus(el) { if (el.value == el.defaultValue) { el.value = ''; } }
        </script>

        <p id="query">Search</p>
        <form method="get" action="https://www.google.com/search">
            <input type="text" value="type here" name="q" onblur="onBlur(this)" autocomplete="off" autofocus onfocus="onFocus(this)" />
        </form>
    </div>
</div>

</body>
</html>
